<div class="container">
  <button class="btn btn-primary mb-3" (click)="openModal()">+ Create Company</button>
  <table class="table table-hover table-responsive table-striped border">
    <thead class="text-nowrap text-truncate">
      <tr>
        <th class="bg-body-tertiary">id</th>
        <th class="bg-body-tertiary text-center">Name</th>
        <th class="bg-body-tertiary">Company Type</th>
        <th class="bg-body-tertiary text-center">Reg No</th>
        <th class="bg-body-tertiary text-center">Address</th>
        <th class="bg-body-tertiary text-center">Status</th>
        <th class="bg-body-tertiary text-center">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let company of companies;">
        <td>{{ company.id }}</td>
        <td>{{ company.name }}</td>
        <td>{{ company.companyType }}</td>
        <td>{{ company.regNo }}</td>
        <td>{{ company.companyAddress }}</td>
        <td>{{ company.status }}</td>
        <td>
          <button class="btn btn-sm btn-primary" (click)="openModal(company)">Edit</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>


<c-modal id="company-modal"   [visible]="modalVisible"  (close)="closeModal()">
  <c-modal-header>
    <h5 class="modal-title">{{ selectedCompany ? 'Edit Company' : 'Create Company' }}</h5>
    <button type="button" class="btn-close" (click)="closeModal()"></button>
  </c-modal-header>
  <c-modal-body>
    <form [formGroup]="companyForm">
      <div class="mb-3">
        <label for="name" class="form-label">Company Name</label>
        <input type="text" id="name" class="form-control" formControlName="name"/>
      </div>

      <div class="mb-3">
        <label for="companyType" class="form-label">Company Type</label>
        <select id="companyType" class="form-select" formControlName="companyType">
          <option *ngFor="let type of companyTypes" [value]="type">{{ type }}</option>
        </select>
      </div>

      <div class="mb-3">
        <label for="regNo" class="form-label">Registration Number</label>
        <input type="text" id="regNo" class="form-control" formControlName="regNo"/>
      </div>

      <div class="mb-3">
        <label for="companyAddress" class="form-label">Company Address</label>
        <input type="text" id="companyAddress" class="form-control" formControlName="companyAddress"/>
      </div>

      <div class="mb-3">
        <label for="status" class="form-label">Status</label>
        <select id="status" class="form-select" formControlName="status">
          <option [value]="true">Active</option>
          <option [value]="false">Inactive</option>
        </select>
      </div>

 
      <div class="mb-3">
        <label for="products" class="form-label">Products</label>
        <app-multi-select-dropdown 
        [options]="productOptions"
        [(selectedItems)]="selectedItems"
        (selectedItemsChange)="onSelectionChange($event)"
        name="products"
        ></app-multi-select-dropdown>
        
      </div>
    </form>
  </c-modal-body>
  <c-modal-footer>
    <button type="button" class="btn btn-secondary" (click)="closeModal()">Cancel</button>
    <button type="button" class="btn btn-primary" (click)="save()">Save</button>
  </c-modal-footer>
</c-modal>

